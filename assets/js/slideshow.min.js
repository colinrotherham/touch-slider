/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(X,J,K){function L(a){$.each(a,function(a,b){c[a]=b});M="undefined"!==typeof c.isTouch?!!c.isTouch:"ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch}function x(){c.isManual||(N=setTimeout(function(){s()},c.interval))}function y(){clearTimeout(O);clearTimeout(N)}function P(a){s.call(this,a,{isPrev:!1})}function Q(a){s.call(this,a,{isPrev:!0})}function s(a,e){var d=b.index;if(!p&&(q=e&&e.isPrev,Y.call(this,e&&e.slide),
	!b.slide.is(b.slideNext))){p=!0;y();var g=K?K.call(b,a):!0;(g||"undefined"===typeof g)&&u(C(d),c.isCarousel?c.time:0,function(){R(a)})}a?a.preventDefault():x()}function u(a,e,d,g){function f(){D=!1;null===a&&(a=C(b.index));e=e||0;if(Z&&c.isCarousel){g=g||0;if(e&&d)l.one(m.toLowerCase()+"TransitionEnd transitionend",d);z[m+"Transition"]=e?e/1E3+"s":"";z[m+"Transform"]="translateX("+-1*(A(a,!0)-g)+"%)";!e&&d&&d()}else l.stop(!0,!0).animate({left:A(a)+"%"},e,d)}window.requestAnimationFrame?requestAnimationFrame(f):
	f()}function R(a){b.slide=b.slideNext;p=!1;h.removeClass(c.classActive);b.slide.addClass(c.classActive);z[m+"Transition"]="";c.canLoop&&S();T();a&&("click"===a.type&&b.slide.focus(),J&&J.call(b,a))}function Y(a){var e=$(this),d=b.index,g=f-1,e=e.is(v)?c.step:1;"undefined"!==typeof a?(q=a<d?!0:!1,d=a):q?(d-=e,d=0>=d?c.canLoop?n(d):0:d):(d+=e,d=d>=g?c.canLoop?n(d):g:d);b.slideNext=h.eq(d);b.index=d}function U(){return!c.canLoop&&(q&&0===b.index||!q&&b.index===f-1)}function V(a){t&&(a?s.call(this,a,
	{slide:E.index(this)}):E.removeAttr("class").eq(b.index).addClass(c.classActive))}function T(){var a,e=c.classDisabled;if(!c.canLoop){v.removeClass(e);switch(b.index){case 0:a=F;break;case f-1:a=G}a&&a.addClass(e)}V()}function A(a,b){return b?100/f*a:-100*a}function n(a){a>=f&&(a-=f);0>a&&(a=f+a);return a}function C(a){return n(b.index+(c.canLoop?B-a:0))}function W(a){return n(c.canLoop?a-B+b.index:a)}function S(){for(var a=f,e,d,g;a--;)e=h.eq(W(a)),d=e.data("x"),g=A(a,!0)+"%",g!==d&&e.css({left:g,
	display:c.display}).attr("tabindex","-1").data("x",g);u(c.canLoop?B:b.index)}function aa(){var a,e;function d(d){var g=d.originalEvent,w=g.touches&&g.touches[0]||g;1<w.length||g.scale&&1!==g.scale||(a=(w.pageX||w.screenX)-l.x,e=(w.pageY||w.screenY)-l.y,"undefined"===typeof r&&(r=!!(r||Math.abs(a)<Math.abs(e))),r||(d.preventDefault(),y(),q=0<a,p=!0,!c.canLoop&&U()&&(a/=Math.abs(a)/b.width+1),D||(D=!0,u(null,null,null,a/b.width*(100/f)))))}function g(){if(!r){var e=+new Date-l.time,f=Math.abs(a),e=
	250>e&&20<f||f>b.width/3;p=!1;e&&!U()?s.call(this,event,{isPrev:q}):0<f&&u(null,c.time)}k.off(m,d);k.off(n,g)}function h(a){H&&clearTimeout(H);H=setTimeout(function(){b.width=k.outerWidth()},a?300:0)}var l,m="touchmove pointermove MSPointerMove",n="touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel";c.isCarousel=!0;k.on("touchstart pointerdown MSPointerDown",function(b){var c=v||t&&t.add(v),f=b.originalEvent,f=f.touches&&f.touches[0]||f;c.has(b.target).length||
	c.is(b.target)||(p&&R(),l={x:f.pageX||f.screenX,y:f.pageY||f.screenY,time:+new Date},r=e=a=void 0,k.on(m,d),k.on(n,g))}).on("click",function(a){!r&&p&&a.preventDefault()}).addClass(c.classTouch);h();$(window).resize(h)}var b=this,I=["ms","O","Moz","Webkit",""],m="",z,c={next:"button.next",previous:"button.previous",markers:".markers",classStrip:"strip",classSlide:"slide",classActive:"sticky",classDisabled:"disabled",classTouch:"touch",step:1,delay:3E3,interval:5E3,time:400,display:"block",canLoop:!1,
	isManual:!0,isCarousel:!0},k,h,l,t,E,v,F,G,O,N,H,f,B,p,D,r,q,M,Z=function(){for(var a=document.body.style,b=I.length;b--;)if("string"===typeof a[I[b]+"Transition"]){m=I[b];break}return!!m}();L(X||{});b.init=function(){k=$(c.slideshow);h=k.find("."+c.classSlide);l=k.find("."+c.classStrip);f=h.length;if(k.length&&!(2>f)){z=l[0].style;b.slide=h.filter("."+c.classActive).first();b.index=h.index(b.slide);b.slide.length||(b.index=0,b.slide=h.eq(b.index));B=c.canLoop?Math.floor((f-1)/2):0;l.outerWidth(100*
	f+"%");h.outerWidth(100/f+"%");M&&aa();k.mouseenter(y).mouseleave(x);G=$(c.next).on("click touchend",P);F=$(c.previous).on("click touchend",Q);v=F.add(G);O=setTimeout(x,c.delay);if(c.markers){t=$(c.markers).on("click touchend","button",V);for(var a=f;a--;)t.prepend($("<button>"+(a+1)+"</button>"));E=t.find("button")}T();S();b.element=k;b.strip=l;b.slides=h;k.removeClass(c.classDisabled)}};b.start=x;b.stop=y;b.next=P;b.prev=Q;b.change=s;b.transition=u;b.getTransitionX=A;b.getIndexWrapped=n;b.getIndexOffset=
	C;b.getPositionOffset=W;b.updateConfig=L};